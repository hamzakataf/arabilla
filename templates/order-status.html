{% load static %}
<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ØªØªØ¨Ø¹ Ø§Ù„Ø·Ù„Ø¨ - Arabella</title>
  <link rel="stylesheet" href="{% static 'css/styles.css' %}" />
</head>
<body>
  <div class="stage">
    <main class="app-shell">

      <header class="app-topbar">
        <!-- Ø±Ø¬ÙˆØ¹ Ù„ØµÙØ­Ø© Ù†Ø¬Ø§Ø­ Ø§Ù„Ø·Ù„Ø¨ -->
        <a class="icon-btn" href="{% url 'order_success' order.id %}" aria-label="Ø±Ø¬ÙˆØ¹">â€¹</a>

        <div class="top-title">ØªØªØ¨Ø¹ Ø§Ù„Ø·Ù„Ø¨</div>

        <a class="icon-btn" href="{% url 'cart' %}" aria-label="Ø§Ù„Ø³Ù„Ø©">ğŸ§º</a>
      </header>

      <section class="container">
        <div class="track-head">
          <div class="track-card">
            <div class="track-row">
              <div>
                <div class="small text-muted">Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</div>
                <div class="track-strong">AR-{{ order.id }}</div>
              </div>

              <!-- Ø´Ø§Ø±Ø© Ø§Ù„Ø­Ø§Ù„Ø© -->
              <div class="track-pill" id="statusPill">
                {% if order.status == 'new' %}NEW
                {% elif order.status == 'preparing' %}Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±
                {% elif order.status == 'ready' %}Ø¬Ø§Ù‡Ø²
                {% elif order.status == 'delivered' %}ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…
                {% elif order.status == 'canceled' %}Ù…Ù„ØºÙŠ
                {% else %}{{ order.status|upper }}
                {% endif %}
              </div>
            </div>

            <div class="track-row mt-12">
              <div>
                <div class="small text-muted">Ø§Ù„Ø·Ø§ÙˆÙ„Ø©</div>
                <div class="track-strong">#{{ order.table_no }}</div>
              </div>

              <div class="small text-muted">
                Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:
                {% if order.updated_at %}
                  {{ order.updated_at }}
                {% else %}
                  {{ order.created_at }}
                {% endif %}
              </div>
            </div>

            {% if order.note %}
              <div class="mt-12 small text-muted">
                <strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong> {{ order.note }}
              </div>
            {% endif %}
          </div>
        </div>

        <!-- Timeline -->
        <div class="timeline mt-16">

          <!-- ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…: Ø¯Ø§Ø¦Ù…Ø§Ù‹ Done -->
          <div class="t-step is-done">
            <div class="t-dot"></div>
            <div class="t-body">
              <div class="t-title">ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</div>
              <div class="t-sub text-muted">ÙˆØµÙ„Ù†Ø§ Ø·Ù„Ø¨Ùƒ ÙˆØªÙ… ØªØ³Ø¬ÙŠÙ„Ù‡</div>
            </div>
          </div>

          <!-- Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ± -->
          <div class="t-step
            {% if order.status == 'preparing' %}is-current
            {% elif order.status == 'ready' or order.status == 'delivered' %}is-done
            {% endif %}">
            <div class="t-dot"></div>
            <div class="t-body">
              <div class="t-title">Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±</div>
              <div class="t-sub text-muted">Ø§Ù„Ø¨Ø§Ø±/Ø§Ù„Ù…Ø·Ø¨Ø® Ø¹Ù… ÙŠØ¬Ù‡Ù‘Ø² Ø§Ù„Ø·Ù„Ø¨</div>
            </div>
          </div>

          <!-- Ø¬Ø§Ù‡Ø² -->
          <div class="t-step
            {% if order.status == 'ready' %}is-current
            {% elif order.status == 'delivered' %}is-done
            {% endif %}">
            <div class="t-dot"></div>
            <div class="t-body">
              <div class="t-title">Ø¬Ø§Ù‡Ø²</div>
              <div class="t-sub text-muted">Ø·Ù„Ø¨Ùƒ ØµØ§Ø± Ø¬Ø§Ù‡Ø² Ù„Ù„ØªÙ‚Ø¯ÙŠÙ…</div>
            </div>
          </div>

          <!-- ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ… -->
          <div class="t-step {% if order.status == 'delivered' %}is-current is-done{% endif %}">
            <div class="t-dot"></div>
            <div class="t-body">
              <div class="t-title">ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…</div>
              <div class="t-sub text-muted">Ø¨Ø§Ù„Ù‡Ù†Ø§Ø¡ ÙˆØ§Ù„Ø´ÙØ§Ø¡</div>
            </div>
          </div>

        </div>

        <!-- Actions -->
        <div class="row mt-16">
          <a class="btn btn-accent-outline" href="{% url 'home' %}" style="flex:1">Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù…Ù†ÙŠÙˆ</a>
          <button class="btn btn-accent" type="button" style="flex:1" onclick="location.reload()">ØªØ­Ø¯ÙŠØ«</button>
        </div>

        <div class="state-hint mt-12 small text-muted">
          * Ø§Ù„Ø­Ø§Ù„Ø© ØªÙØ­Ø¯Ù‘Ø« Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© (/panel/).
        </div>
      </section>

    </main>
  </div>
</body>
</html>
