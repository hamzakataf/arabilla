{% load static %}
<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ุชุญุฏูุฏ ุงูุทุงููุฉ - Arabella</title>
  <link rel="stylesheet" href="{% static 'css/styles.css' %}" />

</head>
<body>
  <div class="stage">
    <main class="app-shell">

      <header class="app-topbar">
        <a class="icon-btn" href="{% url 'index' %}"  aria-label="ุฑุฌูุน">
          <span class="chev">โบ</span>
        </a>
        <div class="top-title">ุชุญุฏูุฏ ุฑูู ุงูุทุงููุฉ</div>
        <a class="icon-btn" href="{% url 'home' %}" aria-label="ุงูุฑุฆูุณูุฉ">๐</a>
      </header>

      <section class="container">
        <div class="state-card">
          <h2 class="state-title">ุฃููุงู ูู ุฃุฑุงุจููุง โ</h2>
          <p class="state-text text-muted">
            ุฅุฐุง ูุชุญุช ุงูุฑุงุจุท ูู QR ุบุงูุจุงู ุฑูู ุงูุทุงููุฉ ุฑุญ ูููู ุฌุงูุฒ ุชููุงุฆูุงู.
            ุฅุฐุง ูู ููุฌูุฏุ ุงูุชุจ ุฑูู ุงูุทุงููุฉ ููู.
          </p>

          <label class="field-label">ุฑูู ุงูุทุงููุฉ</label>
          <input id="tableInput" class="text-input" type="number" inputmode="numeric" placeholder="ูุซุงู: 12" />

          <div class="row mt-12">
            <button id="saveBtn" class="btn btn-accent" type="button" style="flex:1">ุชุฃููุฏ</button>
            <button id="clearBtn" class="btn btn-accent-outline" type="button">ูุณุญ</button>
          </div>

          <div class="small text-muted mt-12">
            ุณูุชู ุญูุธ ุฑูู ุงูุทุงููุฉ ุนูู ููุณ ุงูุฌูุงุฒ ูุทูุจุงุชู ุงููุงุฏูุฉ.
          </div>
        </div>
      </section>

    </main>
  </div>

  <script>
    // ูุญูุธ ุฑูู ุงูุทุงููุฉ ูู localStorage (ูุงุฌูุฉ ููุท - ุฑุจุท Django ูุงุญูุงู)
    const tableInput = document.getElementById('tableInput');
    const saveBtn = document.getElementById('saveBtn');
    const clearBtn = document.getElementById('clearBtn');

    // ูู ุฌุงู ูู QR ูุซู: table.html?table=12
    const params = new URLSearchParams(location.search);
    const fromQr = params.get('table');
    const saved = localStorage.getItem('ar_table');

    tableInput.value = fromQr || saved || '';

    saveBtn.addEventListener('click', () => {
      const v = (tableInput.value || '').trim();
      if (!v) {
        alert('ูู ุณูุญุช ุงูุชุจ ุฑูู ุงูุทุงููุฉ');
        return;
      }
      localStorage.setItem('ar_table', v);
      location.href = "{% url 'home' %}" ;
    });

    clearBtn.addEventListener('click', () => {
      localStorage.removeItem('ar_table');
      tableInput.value = '';
    });
  </script>
</body>
</html>
